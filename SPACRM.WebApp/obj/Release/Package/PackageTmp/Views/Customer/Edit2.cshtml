@{
    ViewBag.Title = "编辑顾客信息";
    Layout = "~/Views/Shared/_LayoutB.cshtml";
    var orgId = ViewData["ORG_ID"] == null ? "0" : ViewData["ORG_ID"].ToString();
    var flag = ViewData["flag"] == null ? "0" : ViewData["flag"].ToString();
    if (flag == "1")
    {
        Layout = "~/Views/Shared/_LayoutC.cshtml";
    }
}
@model SPACRM.Entity.CUST_INFO

@section htmlhead{
    @Html.Css("plugin/validator", "plugin/xjgrid", "plugin/xjdailog")
    <style type="text/css">
        .h_title {
            padding: 5px 15px;
            border-bottom: solid 1px #e6e5e5;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .btnpanel_right {
            float: right;
        }

        .btnpanel {
            text-align: center;
        }

        .col-sm-8 {
            padding: 0;
        }

        .filter_panel {
        }
    </style>
}
<div style="margin: -2px 15px; background-color: #fff;">
    @if (flag == "1")
    {
        <div id="page-heading">
            <h2>
                <i class="fa fa-group"></i>顾客信息维护
            </h2>
        </div>
    }
    <div>
        <form id="frmEdit" action="@Url.Action("Save")" method="post" role="form"  class="form-horizontal">
            @Html.Hidden("ID", Model.ID)
            @Html.Hidden("flag", flag)
            <br />
            <div class="form-group">
                <label for="NAME" class="col-sm-2 control-label">顾客姓名:</label>
                <div class="col-sm-6">
                    @Html.TextBox("NAME", Model.NAME, new { @class = "form-control", placeholder = "请输入顾客姓名" })
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="MOBILE">手机号码:</label>
                <div class="col-sm-6">
                    @Html.TextBox("MOBILE", Model.MOBILE, new { @class = "form-control", placeholder = "请输入手机号码" })
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="GENDER">性 别:</label>
                <div class="col-sm-6">
                    @Html.ResourceRadioList("GENDER", "CGENDER", string.IsNullOrEmpty(Model.GENDER) ? "女" : Model.GENDER, null)
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="BIRTHDAY">生 日:</label>
                <div class="col-sm-6 input-group date" id="birthday_picker">
                    @Html.TextBox("BIRTHDAY", Model.BIRTHDAY, new { @class = "form-control" })
                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="IDTYPE">证件类型:</label>
                <div class="col-sm-6">
                    @Html.ResourceDropDownList("IDTYPE", "CARD_TYPE", Model.IDTYPE, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="IDCARD">证件号码:</label>
                <div class="col-sm-6">
                    @Html.TextBox("IDCARD", Model.IDCARD, new { @class = "form-control", placeholder = "请输入证件号码" })
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">住址:</label>
                <div class="col-sm-6">
                    @Html.TextBox("ADDRESS", Model.ADDRESS, new { @class = "form-control", placeholder = "请输入顾客住址" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">顾客来源:</label>
                <div class="col-sm-6">
                    @Html.ResourceDropDownList("SOURCE", "Cust_Source", "", new { @class = "form-control" }, orgId, false)
                </div>
            </div>
            <div class="form-group" id="show">
                <label class="col-sm-2 control-label">合作商户卡:</label>
                <div class="col-sm-6">
                    @Html.ResourceDropDownList("MERCHANT", "Discount", "", new { @class = "form-control" }, orgId, false)
                </div>
            </div>


            <div class="form-group">
                <label class="col-sm-2 control-label" for="EMAIL">电子邮件:</label>
                <div class="col-sm-6 input-group">
                    <span class="input-group-addon">@@</span>
                    @Html.TextBox("EMAIL", Model.EMAIL, new { @class = "form-control", placeholder = "请输入电子邮件" })
                </div>

            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="WECHAT">微信账号:</label>
                <div class="col-sm-6">
                    @Html.TextBox("WECHAT", Model.WECHAT, new { @class = "form-control", placeholder = "请输入微信账号" })
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="QQ">QQ号码:</label>
                <div class="col-sm-6">
                    @Html.TextBox("QQ", Model.QQ, new { @class = "form-control", placeholder = "请输入QQ号码" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label" for="QQ">收入范围:</label>
                <div class="col-sm-6">
                    @Html.ResourceDropDownList("INCOME", "Income_Range", "", new { @class = "form-control" }, orgId, false)
                </div>
            </div>


            <div class="form-group">
                <label class="col-sm-2 control-label">关联人1:</label>
                <div class="col-sm-6">
                    @Html.TextBox("LINK_PERSON_NAME1", Model.LINK_PERSON_NAME1, new { @class = "form-control", placeholder = "请输入关联人" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label" for="MOBILE">关联手机号:</label>
                <div class="col-sm-6">
                    @Html.TextBox("LINK_PERSON_PHONE1", Model.LINK_PERSON_PHONE1, new { @class = "form-control", placeholder = "请输入关联手机号" })
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">关联人2:</label>
                <div class="col-sm-6">
                    @Html.TextBox("LINK_PERSON_NAME2", Model.LINK_PERSON_NAME2, new { @class = "form-control", placeholder = "请输入关联人" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label" for="MOBILE">关联手机号:</label>
                <div class="col-sm-6">
                    @Html.TextBox("LINK_PERSON_PHONE2", Model.LINK_PERSON_PHONE2, new { @class = "form-control", placeholder = "请输入关联手机号" })
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">关联人3:</label>
                <div class="col-sm-6">
                    @Html.TextBox("LINK_PERSON_NAME3", Model.LINK_PERSON_NAME3, new { @class = "form-control", placeholder = "请输入关联人" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label" for="MOBILE">关联手机号:</label>
                <div class="col-sm-6">
                    @Html.TextBox("LINK_PERSON_PHONE3", Model.LINK_PERSON_PHONE3, new { @class = "form-control", placeholder = "请输入关联手机号" })
                </div>
            </div>
            @*<div style="border-bottom:solid 1px #000;margin-bottom:10px;">
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="CARD_NO">会员卡号:</label>
                <div class="col-sm-6">
                    @Html.TextBox("CARD_NO", Model.CARD_NO, new { @class = "form-control", placeholder = "请输入会员卡号" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label" for="Password">密 码:</label>
                <div class="col-sm-6">
                    @Html.TextBox("Password", Model.PASSWORD, new { @class = "form-control", placeholder = "请输入密码" })
                </div>
            </div>*@

        </form>
        <div class="modal-footer">
            @* <button type="button" id="btnSave2" class="btn btn-green">发卡并保存</button>*@
            <button type="button" id="btnSave" class="btn btn-primary">保 存</button>
            <button type="button" id="btnClose" class="btn btn-default" data-dismiss="modal">取 消</button>
        </div>
    </div>
</div>

<div id="confirmModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">发卡确认！</h4>
            </div>
            <div class="modal-body">
                <p id="tsMsg">顾客信息保存成功，是否继续为该顾客发卡?</p>
                <input id="hdCurrentId" type="hidden" value="" />
            </div>
            <div class="modal-footer">
                <button type="button" id="btnYes" class="btn btn-primary">是</button>
                <button type="button" id="btnNo" class="btn btn-default" data-dismiss="modal">否</button>
            </div>
        </div>
    </div>
</div>

@section jssection{
    <script type="text/javascript">
        var util = { customer: null };
        var options = {
            indexUrl: "@Url.Action("Index")",
            faCardUrl: "@Url.Action("FaCard")"
        };
    </script>
    @Html.Js("plugins/validator/validator", "plugins/form-datepicker/js/bootstrap-datepicker", "plugins/form-datepicker/js/locales/bootstrap-datepicker.zh-CN", "app/customer/edit", "plugins/xjdailog/xjdailog")
}