@{
    ViewBag.Title = "顾客管理";
    var orgId = ViewData["ORG_ID"] == null ? "0" : ViewData["ORG_ID"].ToString();
    var store = ViewData["store"] == null ? "0" : ViewData["store"].ToString();
    var regionid = ViewData["region_id"] == null ? "0" : ViewData["region_id"].ToString();
}

@section htmlhead {

    @Html.Css("plugin/validator", "plugin/xjgrid", "plugin/xjdailog")
    <style type="text/css">
        .h_title { padding: 5px 15px; border-bottom: solid 1px #e6e5e5; font-size: 18px; margin-bottom: 5px; }

        .searchpanel { background-color: #f7f8fa; /*border: 1px solid #ccc;*/ padding: 5px 15px; margin-left: 10px; border-radius: 4px; }

        .searchpanel .form-group label { margin-bottom: 4px; }

        #SearchBox { width: 200px; }
    </style>
}
<div class="s_container">
    <div id="page-heading">
        <h2>
            <i class="fa fa-group"></i>顾客管理</h2>
    </div>
    <div id="mainbody" class="panel panel-primary">
        <div class="panel-heading">
            <h4>
                顾客列表</h4>
        </div>
        <div class="panel-body" style="min-height: 350px">
            <div class="row">
                <div class="col-md-1 form-group">
                    @if (store != "0")
                    {
                        <button type="button" class="btn default" id="btnAdd">
                            <i class="fa fa-plus"></i>新 增</button>
                    }
                </div>
                <form class="form-inline" role="form" id="formQuery">
                <div class="text-right col-md-11">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="姓名、手机号查询" id="CUST_NAME" name="NAME"
                            style="width: 170px;" />
                        <input type="text" class="form-control" placeholder="卡号查询" id="CARD_NO" name="CARD_NO"
                            style="width: 170px;" />
                        @*<input type="text" class="form-control" placeholder="" id="CUST_PHONE" name="MOBILE" style="width: 170px;" />
                              <input type="hidden" id="CUST_NAME" name="NAME" style="width: 200px" />
                    <input type="hidden" id="CUST_PHONE" name="MOBILE" />
                      <input type="hidden" id="CARD_NO" name="CARD_NO" />
                            <input type="hidden" id="STORE_ID" name="STORE_ID" />*@
                    </div>
                    <div class="form-group">
                        <select name="TYPE" id="TYPE" class="form-control" style="width: 130px;">
                            <option value="">所有类型顾客</option>
                            <option value="1">门店会员</option>
                            <option value="0">体验顾客</option>
                        </select>
                    </div>
                    <div class="form-group">
                        @Html.ResourceDropDownList("STORE", "LoginStore", "门店名称", new { @class = "form-control" }, orgId, regionid, store, false)
                    </div>
                    <div class="form-group">
                        <div class="text-left btn-group">
                            @* <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                快速查询 <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="@Url.Action("Index")">所有顾客</a></li>
                                <li><a href="#">只消费过一次</a></li>
                                <li><a href="#">一个月没来</a></li>
                                <li><a href="#">半年没来</a></li>
                                <li><a href="@Url.Action("Index", "customer", new  {searchid=1 })">当月生日</a></li>
                            </ul>*@
                            <button class="btn-primary btn">
                                <i class="fa fa-search"></i>查 询</button>
                        </div>
                    </div>
                </div>
                </form>
                <div class="col-md-12">
                    <div class="table-responsive" id="gridlist">
                    </div>
                </div>
            </div>
        </div>
        <div id="confirmModal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;</button>
                        <h4 class="modal-title">
                            确认！</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            你确认要删除用户[ <span id="lbuserName"></span>]吗？
                        </p>
                        <input id="hdCurrentId" type="hidden" value="" />
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">
                            取 消</button>
                        <button type="button" id="btnConfirm" class="btn btn-primary">
                            确 定</button>
                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->
        <!--发卡Begin-->
        <div id="FaCardModal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;</button>
                        <h4 class="modal-title">
                            会员发卡</h4>
                    </div>
                    <div class="modal-body col-xs-12" id="EditModelData">
                        <form id="frmFaCardSave" method="post" action="@Url.Action("FaCardSave")" role="form">
                        <div class="form-group">
                            <div class="row">
                                <label class="col-xs-2 control-label" for="ORG_NAME">
                                    顾客姓名：</label>
                                <div class="col-xs-8">
                                    <span id="spanCUST_NAME"></span>
                                    <input type="hidden" id="CUST_ID" name="ID" value="" />
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <label class="col-xs-2 control-label" for="ORG_NAME">
                                    手机号码：</label>
                                <div class="col-xs-8">
                                    <span id="spanPHONE"></span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <label class="col-xs-2 control-label" for="BRAND">
                                    表面卡号：</label>
                                <div class="col-xs-8">
                                    @Html.TextBox("CARD_NO", null, new { @class = "form-control", maxlength = "18" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <label class="col-xs-2 control-label" for="MANAGER">
                                    密 码：</label>
                                <div class="col-xs-8">
                                    @Html.TextBox("PASSWORD", null, new { @class = "form-control", type = "password", maxlength = "8" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <label class="col-xs-2 control-label" for="MANAGER">
                                    是否记名：</label>
                                <div class="col-xs-8">
                                    @Html.ResourceRadioList("IS_UNREGISTER", "YES_NO", 1, null)
                                </div>
                            </div>
                        </div>
                        </form>
                    </div>
                    <div style="clear: both">
                    </div>
                    <div class="modal-footer">
                        <button type="reset" id="btnCancel" class="btn btn-default" data-dismiss="modal">
                            取 消
                        </button>
                        <button type="button" id="btnFaCardSave" class="btn btn-primary">
                            保 存
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.modal -->
    </div>
</div>
<input type="hidden" id="custId" />
<input type="hidden" id="hideCUST_NAME" />
@section jssection{
    <script type="text/javascript">
        var util = {};
        var options = {
                listUrl: "@Url.Action("List")",
                editUrl: "@Url.Action("Edit2")",
                deleteUrl: "@Url.Action("Delete")",
                queryCustomerUrl: "@Url.Action("QueryCustomer", "Customer", new { type = "name" })",
                hasRight_ModifyCardExpire: "@ViewBag.HasRight_ModifyCardExpire"
            };

    </script>
    @Html.Js("plugins/xjgrid/xjgrid", "app/customer/index")
}
