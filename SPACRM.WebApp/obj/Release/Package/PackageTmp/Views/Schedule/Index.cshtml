@{
    ViewBag.Title = "排班管理";
    var orgId = ViewData["ORG_ID"] == null ? "0" : ViewData["ORG_ID"].ToString();
    var store = ViewData["store"] == null ? "0" : ViewData["store"].ToString();
    var regionid = ViewData["region_id"] == null ? "0" : ViewData["region_id"].ToString();
}
@model SPACRM.Entity.ORG_EMPLOYEE
@section htmlhead{
    @Html.Css("plugin/xjgrid", "plugin/xjdailog")
    @Html.Css("plugin/validator")
   <link href="~/assets/plugins/jqueryui-timepicker/jquery.ui.timepicker.css" rel="stylesheet" />
  @*   <link href="~/assets/plugins/form-daterangepicker/daterangepicker-bs3.css" rel="stylesheet" />*@
    <style type="text/css">
        .h_title {
            padding: 5px 15px;
            border-bottom: solid 1px #e6e5e5;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .searchpanel {
            background-color: #f7f8fa; /*border: 1px solid #ccc;*/
            padding: 5px 15px;
            margin-left: 10px;
            border-radius: 4px;
        }

            .searchpanel .form-group label {
                margin-bottom: 4px;
            }

        #tableShedule {
            width: 100%;
            border: 1px solid #e6e5e5;
            text-align: center;
        }

            #tableShedule thead tr td {
                border: 1px solid #e6e5e5;
                font-size: 12px;
                font-weight: 800;
            }

            #tableShedule tbody tr td {
                border: 1px solid #e6e5e5;
                width: 3%;
                font-size: 12px;
            }

                #tableShedule tbody tr td:hover {
                    background-color: #e6e5e5;
                }

        .tEvent:hover {
            cursor: pointer;
        }

        .tEName {
            background-color: #f7f8fa;
        }

        .divSchedule {
            height: 20px;
            float: left;
            font-size: larger;
            font-family: 宋体;
            color: white;
            font-weight: 300;
            cursor: pointer;
        }

        .radio-inline {
            cursor: pointer;
            margin-left: 10px;
        }

        .divSchedule-h {
           height: 20px;
            float: left;
            font-size: larger;
            font-family: 宋体;
            color: white;
            font-weight: 300;
            cursor: pointer;
        }
        .radio-inline-h {
            margin-left: 10px;
        }
    </style>
}
<div class="s_container">
    <div id="page-heading">
        <h2>
            <i class="fa  fa-calendar-o"></i>&nbsp;排班管理</h2>
    </div>
    <div id="mainbody" class="panel panel-primary">
        <div class="panel-heading">
            <h4>排班
            </h4>
        </div>
        <div class="panel-body" style="min-height: 350px">
            <div class="row">
                <div class="col-md-2 form-group">
                    <button type="button" class="btn default" id="btnAdd">
                        <i class="fa fa-plus"></i>&nbsp;排班</button>
                </div>
                 <div class="col-md-6 form-group">
                     <div style="margin-top:10px;">
                      @foreach (var item in (List<SPACRM.Entity.Entities.SCHEDULE_INFO_EX>)ViewBag.scheduleList)
                            {
                                <div class="radio-inline" style="height:25px; cursor:default;">
                                        <label>
                                       <span class="divSchedule" style="background-color:@item.COLOR;height:25px; cursor:default;">@item.NAME</span>
                                       </label>
                                </div>
                            }
                         </div>
                 </div>
                <div class="text-right col-md-4">
                    <form id="formQuery" class="form-inline" role="form">
                        <div class="form-group col-md-6">
                            <div class="input-group" >
                                @Html.ResourceDropDownList("STORE_ID", "LoginStore",store, new { @class = "form-control" },orgId,regionid,store,false)  
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <div class="input-group date" id="birthday_picker">
                                @Html.TextBox("scheduleDate", DateTime.Now.ToString("yyyy-MM-dd"), new { @class = "form-control" })
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-md-12">
                    <div id="gridlist">
                        <table id="tableShedule">
                            <thead></thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div id="confirmModal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                     <form id="frmEdit" action="@Url.Action("EditSchedule")" method="post" role="form">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">修改班次信息<span id="spanEName"></span></h4>
                        <input type="hidden" id="ESchId" name="ID" />
                    </div>
                    <div>
                    </div>
                    <div class="modal-body">
                        <div>
                           
                            @foreach (var item in (List<SPACRM.Entity.Entities.SCHEDULE_INFO_EX>)ViewBag.scheduleList)
                            {
                                <div class="radio-inline">
                                    <label>
                                        <input type="radio" name="SCHEDULE_TYPE" value="@item.ID" title="@item.NAME" itemid="@item.BEGINTIME&@item.ENDTIME">
                                        &nbsp;<span class="divSchedule" style="background-color:@item.COLOR;">@item.NAME</span>
                                    </label>
                                </div>
                            }
                            <div class="form-group">
                                <div class="input-group date" id="divBeginDate">
                                    <label>开始时间</label>
                                    @Html.TextBox("BEGINTIME",null, new { @class = "form-control",@disabled="true" })
                                </div>
                                <div class="input-group date" id="divEndDate">
                                    <label>结束时间</label>
                                    @Html.TextBox("ENDTIME", null, new { @class = "form-control",@disabled="true"  })
                                </div>
                            </div>
                                
                        </div>
                    </div>
                    <div class="modal-footer">
                         <button type="button" class="pull-left dp-panel" id="btnDelete">休 班</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">取 消</button>
                        <button type="button" id="btnSave" class="btn btn-primary">确 定</button>
                    </div>
                    </form>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->
    </div>
</div>
<input type="hidden" id="zdyBeginTime" />
 <input type="hidden" id="zdyEndTime" />
@section jssection{
    <script type="text/javascript">
        var util = {};
        var options = {
            listUrl: "@Url.Action("List")",
            deleteempUrl: "@Url.Action("DeleteEmpSchedule")",
            ENameList: "@Url.Action("ScheduleENameList")",
            editUrl: "@Url.Action("Edit")",
            deleteUrl: "@Url.Action("Delete")"
        };
    </script>
    @Html.Js("plugins/validator/validator", "plugins/form-datepicker/js/bootstrap-datepicker", "plugins/form-datepicker/js/locales/bootstrap-datepicker.zh-CN", "plugins/xjgrid/xjgrid", "plugins/xjdailog/xjdailog", "app/schedule/index")


}