@{
    ViewBag.Title = "员工提成明细表";
    var orgId = ViewData["ORG_ID"] == null ? "0" : ViewData["ORG_ID"].ToString();
    var store = ViewData["store"] == null ? "0" : ViewData["store"].ToString();
    var regionid = ViewData["region_id"] == null ? "0" : ViewData["region_id"].ToString();

    var beginDate = Request.Cookies["BEGIN_DATE"] == null ? DateTime.Now.ToString("yyyy-MM-dd") : Request.Cookies["BEGIN_DATE"].Value;
    var endDate = Request.Cookies["END_DATE"] == null ? DateTime.Now.ToString("yyyy-MM-dd") : Request.Cookies["END_DATE"].Value;

    var region = Request.Cookies["REGION"] == null ? "" : Request.Cookies["REGION"].Value;
    var storeId = Request.Cookies["STORE"] == null ? "" : Request.Cookies["STORE"].Value;

    var sbeginDate = Request.Cookies["SBEGIN_DATE"] == null ? DateTime.Now.ToString("yyyy-MM-dd") : Request.Cookies["SBEGIN_DATE"].Value;
    var sendDate = Request.Cookies["SEND_DATE"] == null ? DateTime.Now.ToString("yyyy-MM-dd") : Request.Cookies["SEND_DATE"].Value;
    var sregion = Request.Cookies["REGION2"] == null ? "" : Request.Cookies["REGION2"].Value;
    var sstoreId = Request.Cookies["STORE2"] == null ? "" : Request.Cookies["STORE2"].Value;

    var cbeginDate = Request.Cookies["CBEGIN_DATE"] == null ? DateTime.Now.ToString("yyyy-MM-dd") : Request.Cookies["CBEGIN_DATE"].Value;
    var cendDate = Request.Cookies["CEND_DATE"] == null ? DateTime.Now.ToString("yyyy-MM-dd") : Request.Cookies["CEND_DATE"].Value;
    var cregion = Request.Cookies["REGION3"] == null ? "" : Request.Cookies["REGION3"].Value;
    var cstoreId = Request.Cookies["STORE3"] == null ? "" : Request.Cookies["STORE3"].Value;
}


@section htmlhead{
    @Html.Css("plugin/validator", "plugin/xjgrid")
    <style type="text/css">
        .h_title {
            padding: 5px 15px;
            border-bottom: solid 1px #e6e5e5;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .btnpanel_right {
            float: right;
        }

        .btnpanel {
            text-align: center;
        }

        .col-sm-8 {
            padding: 0;
        }

        .filter_panel {
        }
    </style>
}
<div style="margin: -2px 15px; background-color: #fff;">
    <div id="page-heading">
        <h2>
            <i class="fa fa-credit-card"></i>员工提成明细表
        </h2>
    </div>

    <div>
        <div class="tab-container">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#PRODUCT" id="tab_product" data-toggle="tab">产品提成明细表</a></li>
                <li><a href="#SERVICE" id="tab_service" data-toggle="tab">项目提成明细表</a></li>
                <li><a href="#CARD" id="tab_card" data-toggle="tab">卡提成明细表</a></li>

            </ul>
            <div class="tab-content">

                <div class="tab-pane active" id="PRODUCT">

                    <div class="row">
                        <form id="PformQuery" class="form-inline" role="form" method="post">
                            @Html.Hidden("store_id", "-1")
                            <div class="form-group">
                                地区名称:
                      @Html.ResourceDropDownList("REGION", "REGIONSTORE", "地区名称", new { @class = "form-control" }, orgId, regionid, store, false)

                            </div>
                            <div class="form-group">
                                分店名称:                

                             <select class="form-control" id="STORE" name="STORE" style="width: 150px">
                                 <option value="">请选择门店名称</option>
                             </select>

                            </div>
                            <div class="form-group">
                                员工姓名:
                            <input type="text" class="form-control" style="width: 150px" placeholder="请输入员工姓名" id="EMPNAME" name="EMPNAME" />
                                是否点钟：<select id="IS_DK" name="IS_DK"><option value="-1">全部</option>
                                    <option value="1">是</option>
                                    <option value="0">否</option>
                                </select>
                            </div>


                            <br />
                            <br />

                            <div class="form-group">
                                产品类别:                
                                                     
                              @Html.ResourceDropDownList("P_Category", "PROD_CATEGORY", "产品类别", new { @class = "form-control", style = "width:150px" }, orgId, false)
                            </div>
                            @*   <div class="form-group">
                         产品小类:                
                                <select class="form-control" id="Pro_SONTYPE" name="SONTYPE">
                            <option value="">请选择项目所属小类</option>
                        </select>                              
                            
                    </div>*@

                            <div class="form-group">
                                产品名称:                
                                                     
                              @Html.ResourceDropDownList("ProdName", "Prod_Name", "产品名称", new { @class = "form-control", style = "width:150px" }, orgId, false)
                                <div class="btn-group">
                                    <button class="btn-primary btn" id="PbtnSearch"><i class="fa fa-search"></i>查 询</button>
                                </div>
                                <div class="btn-group">
                                    @Html.Hidden("ExcelName", "营业收入表")
                                    @Html.ActionLink("导出excel", "CommissionProdExcel", new { @style = "color:white;", BEGIN_DATE = beginDate, END_DATE = endDate, REGION = region, STORE = storeId }, "ExcelName")
                                </div>

                            </div>

                            <div class="text-right col-md-4 form-group">

                                <div class="col-sm-12 input-group date" id="birthday_picker">
                                    @Html.TextBox("BEGIN_DATE", DateTime.Now.ToString("yyyy-MM-dd 05:00"), new { @class = "form-control" })
                                    <span class="input-group-addon">to</span>
                                    @Html.TextBox("END_DATE", DateTime.Now.ToString("yyyy-MM-dd 05:00"), new { @class = "form-control" })
                                </div>

                            </div>


                        </form>
                        <br />

                        <div class="col-md-14">
                            <div id="Productgridlist">
                            </div>
                        </div>
                    </div>
                </div>


                <div class="tab-pane" id="SERVICE">
                    <div class="row">
                        <form id="SformQuery" class="form-inline" role="form" method="post">
                            @Html.Hidden("store_id", "-1")
                            <div class="form-group">
                                地区名称:
                      @Html.ResourceDropDownList("REGION2", "REGIONSTORE", "地区名称", new { @class = "form-control" }, orgId, regionid, store, false)

                            </div>
                            <div class="form-group">
                                分店名称:                

                             <select class="form-control" id="STORE2" name="STORE" style="width: 150px">
                                 <option value="">请选择门店名称</option>
                             </select>


                            </div>
                            <div class="form-group">
                                员工姓名:
                            <input type="text" class="form-control" placeholder="请输入员工姓名" id="EMPNAME" name="EMPNAME" />
                                是否点钟：<select id="IS_DK" name="IS_DK"><option value="-1">全部</option>
                                    <option value="1">是</option>
                                    <option value="0">否</option>
                                </select>
                            </div>


                            <br />
                            <br />
                            <div class="form-group">
                                项目类别:
                              @Html.ResourceDropDownList("SERTYPE", "SER_TYPE", "项目类别", new { @class = "form-control", style = "width:170px" }, orgId, false)
                            </div>

                            @*    <div class="form-group">
                         项目小类:                
                                                     
                              <select class="form-control" id="SER_SONTYPE" name="SONTYPE">
                            <option value="">请选择项目所属小类</option>
                        </select>     
                    </div>*@

                            <div class="form-group">
                                项目名称:                
                                                     
                              @Html.ResourceDropDownList("ServiceName", "Service_Name", "项目名称", new { @class = "form-control", style = "width:150px" }, orgId, false)
                                <div class="btn-group">
                                    <button class="btn-primary btn" id="SbtnSearch"><i class="fa fa-search"></i>查 询</button>
                                </div>
                                <div class="btn-group">
                                    @Html.Hidden("ExcelName", "营业收入表")
                                    @Html.ActionLink("导出excel", "CommissionServiceExcel", new { @style = "color:white;", SBEGIN_DATE = sbeginDate, SEND_DATE = sendDate, REGION = sregion, STORE = sstoreId }, "ExcelName")
                                </div>
                            </div>
                            <div class="text-right col-md-4 form-group">

                                <div class="col-sm-12 input-group date" id="sbirthday_picker">
                                    @Html.TextBox("SBEGIN_DATE", DateTime.Now.ToString("yyyy-MM-dd"), new { @class = "form-control" })
                                    <span class="input-group-addon">to</span>
                                    @Html.TextBox("SEND_DATE", DateTime.Now.ToString("yyyy-MM-dd"), new { @class = "form-control" })
                                </div>

                            </div>


                        </form>
                        <br />

                        <div class="col-md-14">
                            <div id="Servicegridlist">
                            </div>
                        </div>
                    </div>

                </div>

                <div class="tab-pane" id="CARD" style="margin: 5px 0;">
                    <div class="row">
                        <form id="CformQuery" class="form-inline" role="form" method="post">
                            @Html.Hidden("store_id", "-1")
                            <div class="form-group">
                                地区名称:
                      @Html.ResourceDropDownList("REGION3", "REGIONSTORE", "地区名称", new { @class = "form-control" }, orgId, regionid, store, false)
                            </div>
                            <div class="form-group">
                                分店名称:                

                             <select class="form-control" id="STORE3" name="STORE" style="width: 150px">
                                 <option value="">请选择门店名称</option>
                             </select>
                            </div>
                            <div class="form-group">
                                员工姓名:
                            <input type="text" class="form-control" placeholder="请输入员工姓名" id="EMPNAME" name="EMPNAME" />
                                是否点钟：<select id="IS_DK" name="IS_DK"><option value="-1">全部</option>
                                    <option value="1">是</option>
                                    <option value="0">否</option>
                                </select>
                            </div>



                            <br />
                            <br />
                            <div class="form-group">
                                卡级名称:                
                                                     
                              @Html.ResourceDropDownList("CardName", "Card_Name", "卡级名称", new { @class = "form-control", style = "width:150px" }, orgId, false)

                                <div class="btn-group">
                                    <button class="btn-primary btn" id="CbtnSearch"><i class="fa fa-search"></i>查 询</button>
                                </div>
                                <div class="btn-group">
                                    @Html.Hidden("ExcelName", "营业收入表")
                                    @Html.ActionLink("导出excel", "CommissionCardExcel", new { @style = "color:white;", CBEGIN_DATE = cbeginDate, CEND_DATE = cendDate, REGION = cregion, STORE = cstoreId }, "ExcelName")
                                </div>
                            </div>

                            <div class="text-right col-md-4 form-group">

                                <div class="col-sm-12 input-group date" id="cbirthday_picker">
                                    @Html.TextBox("CBEGIN_DATE", DateTime.Now.ToString("yyyy-MM-dd"), new { @class = "form-control" })
                                    <span class="input-group-addon">to</span>
                                    @Html.TextBox("CEND_DATE", DateTime.Now.ToString("yyyy-MM-dd"), new { @class = "form-control" })
                                </div>

                            </div>
                        </form>
                        <br />

                        <div class="col-md-14">
                            <div id="Cardgridlist">
                            </div>
                        </div>
                    </div>


                </div>


            </div>
        </div>
    </div>
</div>
@section jssection{
    <script type="text/javascript">
        var _utils = {};
        var options = {
            P_QueryUrl: "@Url.Action("CommissionListProduct")",
            S_QueryUrl: "@Url.Action("CommissionListService")",
            C_QueryUrl: "@Url.Action("CommissionListCard")",
            proTypeUrl: "@Url.Action("GetStore")",
            proSerUrl: "@Url.Action("GetProdTypesByName")",
            proUrl: "@Url.Action("GetProdTypesByProId")",
            indexUrl: "@Url.Action("Index")",
            queryEmployeeByQ: "@Url.Action("QueryEmployeeByQ", "Common")"
        };
    </script>
    @Html.Js("plugins/validator/validator", "plugins/xjgrid/xjgrid", "plugins/form-datepicker/js/bootstrap-datepicker",
    "plugins/form-datepicker/js/locales/bootstrap-datepicker.zh-CN", "app/report/commission")
}