@using ServiceStack.Text;

@{
    ViewBag.Title = "来电及预约管理";
    var orgId = ViewData["ORG_ID"] == null ? "0" : ViewData["ORG_ID"].ToString();
    var store = ViewData["store"] == null ? "0" : ViewData["store"].ToString();
    var regionid = ViewData["region_id"] == null ? "0" : ViewData["region_id"].ToString();  
}
@model SPACRM.WebApp.ViewModels.BookIndexModel
@section htmlhead{ 
    @Html.Css("plugin/xjcalendar", "plugin/xjdailog", "plugin/slider", "plugin/xjdp", "bookapp")  
}
<style type="text/css">
            .tEName { /*已排班*/
            background-color: #FFFFFF;
            }

            .twpb {  /*未排班*/
                background-color: #CDCDCD;
            }

            .yyy { /*新预约*/
                background-color: #def7da;
            }

            .yqx {  /*已取消*/
                background-color: red;
            }
            .ydd {/*已到店*/
                background-color: blue;
            }
            .ykd {/*已开单*/
                background-color: #ffd4df;
            }
            .yjz {/*已结账*/
                background-color: #cfeffc;
            }
</style>

<div>
    <div class="view-main">
        <div class="view-wrap">
            <div class="view-toolbar">
                <div class="pull-left" style="width:150px;">
                    @Html.ResourceDropDownList("STORE_Id", "LoginStore", store, new { @class = "view-col-type" }, orgId, regionid, store, false)                    
                </div>
                <div class="pull-left" style="width:150px;">                  
                    <select id="slCol" class="view-col-type">
                        <option value="1|">所有技师</option>                     
                    </select>
                </div>
                <div class="pull-left dp-panel">
                    <span id="dateshow" class="dateshow">
                       @Model.DateDisplay
                    </span>
                    <input id="hdshowday" type="hidden" value="@Model.CurrentDate.ToString("yyyy-MM-dd")" name="hdshowday" />
                    <ul class="cal-op">
                        <li><a href="javascript:;" id="prev-cal" class="prev-cal"><i class="fa fa-arrow-left"></i></a></li>
                        <li><a href="javascript:;" id="next-cal" class="next-cal"><i class="fa fa-arrow-right"></i></a></li>
                        <li><a href="javascript:;" id="choose-cal" class="choose-cal"><i class="fa fa-calendar"></i></a></li>
                    </ul>

                    <ul class="cal-op">
                         <li>&nbsp;&nbsp;<a href="javascript:;" id="ypb" class="tEName" style="width:28px;height:28px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>已排班</li>
                        <li>&nbsp;&nbsp;<a href="javascript:;" id="wpb" class="twpb" style="width:28px;height:28px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>未排班</li>
                         <li>&nbsp;&nbsp;<a href="javascript:;" id="yyy" class="yyy" style="width:28px;height:28px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>新预约</li>
                        @*<li>&nbsp;&nbsp;<a href="javascript:;" id="yqx" class="yqx" style="width:28px;height:28px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>已取消</li>*@
                        @*<li>&nbsp;&nbsp;<a href="javascript:;" id="ydd" class="ydd" style="width:28px;height:28px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>已到店</li>*@
                        <li>&nbsp;&nbsp;<a href="javascript:;" id="ykd" class="ykd" style="width:28px;height:28px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>已开单</li>
                        <li>&nbsp;&nbsp;<a href="javascript:;" id="yjz" class="yjz" style="width:28px;height:28px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>已结账</li>
                    </ul>
                </div>
               
                @*<div class="pull-right">
                         <a href="#" id="btnShowWxList" class="btn btn-inverse"><i class="fa fa-dot-circle-o"> 微信列表</i></a>
                     </div>
                     <div class="pull-right">
                         <a href="#" id="btnShowFailList" class="btn btn-inverse"><i class="fa fa-dot-circle-o"> 预约列表</i></a>
                     </div>*@

                <div class="pull-right">
                    <ul class="cal-op">
                        <li><a href="javascript:;" id="changesize" class="changesize"><i class="fa fa-search-plus"></i><span class="caret"></span></a></li>
                        <li><a href="javascript:;" id="filter" class="filter"><i class="fa fa-filter"></i><span class="caret"></span></a></li>
                    </ul>
                </div>
            </div>
            <div id="calendar" unselectable="on" onselectstart="return false;">
                正在努力加载视图，请稍后...
            </div>
            <div style="height:10px;"></div>
        </div>
    </div>
    <div id="dp-wrapper" class="dp-wrapper">
        <div id="dp-inner" class="dp-inner"></div>
        <div id="dp-btn-panel" class="dp-btn-panel">
            <button id="dp-btn-today" type="button" class="btn btn-warning btn-sm pull-left">今天</button>
            <button id="dp-btn-cancel" type="button" class="btn btn-default btn-sm pull-right">取消</button>
        </div>
    </div>
    <div id="slider-wrapper" class="slider-wrapper">
        <div>列宽设置：</div>
        <div class="sliderpanel"><input type="text" id="col_slider" class="sliderinput" value="" /></div>
        <div class="split"></div>
        <div>时间缩放：</div>
        <div class="sliderpanel"><input type="text" id="time_slider" class="sliderinput" value="" /></div>
    </div>
    <div id="filter-wrapper" class="filter-wrapper">
        <div class="filter-title">选择显示列</div>
        <div id="filter-content" class="filter-content"></div>
        <div class="filter-btn-panel">
            <a id="filter-cball" href="javascript:;">全选</a>
            <span style="margin-right:10px">|</span>
            <a id="filter-cball-not" href="javascript:;">全部不选</a>

            <button id="filter-ok" class="btn btn-success btn-sm pull-right" type="button"> 显示所选 </button>

            <a id="filter-cancel" href="javascript:;" class="pull-right"><i class="fa fa-angle-double-left"></i>取消</a>

        </div>
    </div>

    <!--弹出的操作层 ，需要去实现各个按钮哦-->
    <div id="itemop-wrapper" class="itemop-wrapper">
        <ul>
            <li><a id="op_btn_0" href='javascript:;'>开单</a></li>
            <li class="separator"></li>
            <li><a id="op_btn_1" href='javascript:;'>编辑</a></li>
            @*<li><a id="op_btn_2" href='javascript:;' >确认</a></li>*@
            <li><a id="op_btn_3" href='javascript:;'>取消</a></li>
             <li class="separator"></li>
            <li><a id="op_btn_4" href='javascript:;'>会员信息</a></li>
        </ul>
        <div style="display:none;">
            <!--存储临时数据，当前点击的项-->
            <input type="hidden" id="hdbookingid" value='' />
             <input type="hidden" id="hdoid" value='' /><!--订单id-->
            <input type="hidden" id="hdpaystate" value='' /><!--支付状态-->
            <input type="hidden" id="hdstate" value='' />
            <input type="hidden" id="hdcustid" value='' />            
        </div>
    </div>
</div>
    @section jssection{   

        <script type="text/javascript">
            var util ={};
            var options ={
                view360Url:"@Url.Action("View360", "Customer")",
                getModelsUrl:"@Url.Action("GetModels")",
                loginUrl:"@Url.Action("UserLogin", "Customer")",
                checkInUrl:"@Url.Action("CardCheckIn", "Customer")",
                tempLoginUrl:"@Url.Action("TempUserLogin", "Customer")",
                viewBillUrl:"@Url.Action("ItemDetail", "Customer")",
                getResourceUrl:"@Url.Action("List", "Resource")",
                setStatusUrl:"@Url.Action("UpdateBookingStatus")",
                editUrl:"@Url.Action("Edit")",
                newListUrl:"@Url.Action("SNewList")",
                failListUrl:"@Url.Action("FailList")",
                calReqHandlerUrl:"@Url.Action("ReqViewHandler")",
                queryMemberUrl: "@Url.Action("QueryCustomers", "Customer")",
                startHour:@Model.StartHour,
                endHour:@Model.EndHour

            };
        </script>
        @Html.Js("plugins/xjcalendar/xjcalendar", "plugins/xjcalendar/xjdp", "plugins/bootstrap-slider/bootstrap-slider", "plugins/xjdailog/xjdailog", "plugins/jquery-tip/jquery.tip", "app/booking/view")
    }
