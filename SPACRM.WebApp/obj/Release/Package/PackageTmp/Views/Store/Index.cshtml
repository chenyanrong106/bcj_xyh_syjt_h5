@{
    ViewBag.Title = "门店列表";
    var orgId = ViewData["ORG_ID"] == null ? "0" : ViewData["ORG_ID"].ToString();
    
}
@model SPACRM.Entity.Entities.ORG_STORE_EX
@section htmlhead{
     @Html.Css("plugin/validator")
    @Html.Css("plugin/xjgrid", "plugin/xjdailog")
<link rel='stylesheet' type='text/css' href='../../assets/css/tree.css' />
      <link href="~/assets/plugins/jqueryui-timepicker/jquery.ui.timepicker.css" rel="stylesheet" />
    <style type="text/css">
        .s_container {
        }

        .h_title {
            padding: 5px 15px;
            border-bottom: solid 1px #e6e5e5;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .searchpanel {
            background-color: #f7f8fa;
            /*border: 1px solid #ccc;*/
            padding: 5px 15px;
            margin-left: 10px;
            border-radius: 4px;
        }

            .searchpanel .form-group, .searchpanel .btnpanel_right {
                display: block;
                overflow: hidden;
                zoom: 1;
                margin-bottom: 0px;
            }

                .searchpanel .form-group label {
                    margin-bottom: 4px;
                }
       .datepicker {
          
           opacity:1;
     
        }
    </style>
}
<div class="s_container">
    <div id="page-heading">
        <h2><i class="fa fa-cog"></i>&nbsp;门店列表</h2>
    </div>
    
    <div id="mainbody" class="panel panel-primary col-md-3">
        <div class="panel-heading">
            <h4>组织机构</h4>
        </div>
        <div class="panel-body">
             <div id="ptree"></div>          
        </div>
    </div>

    <div id="mainbody1" class="panel panel-primary col-md-9">
        <div class="panel-heading">
            <h4 id="h4Dict">门店列表</h4>
        </div>
        
        <div class="panel-body" style="min-height: 350px">
            <div class="row">
                <div class="col-md-2 form-group">
                    <button type="button" class="btn default" id="btnAdd" style="display:"><i class="fa fa-plus"></i>新 增</button>
               @*      @Html.TextBox("CLOSE_DATE_Str", Model.CLOSE_DATE_Str, new { @class = "form-control" })*@
                </div>
        <div class="text-right col-md-10">
            <form id="formQuery" role="form" class="form-inline">
                @Html.Hidden("REGION_ID1", "0") 
                <div class="form-group">
                    <input type="text" class="form-control" id="SNAME" name="SNAME" placeholder="门店名称">
                </div>
                <div class="form-group">
                    @Html.ResourceDropDownList("STYPE", "StoreType", "门店类型", new { @class = "form-control" })
                </div>
                <div class="form-group">
                    @Html.ResourceDropDownList("SSTATUS", "OPEN_CLOSE", "门店状态", new { @class = "form-control" })
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn btn-primary" id="btnQuery"><i class="fa fa-search"></i>查 询</button>
                </div>                
            </form>
        </div>
                <div class="col-md-12">
                    <div class="table-responsive" id="gridlist">
                    </div>
                </div>
            </div>
        </div>

        <div id="confirmModal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">确认！</h4>
                    </div>
                    <div class="modal-body">
                        <p>你确认要删除门店[ <span id="lbuserName"></span>]吗？</p>
                        <input id="hdCurrentId" type="hidden" value="" />
                    </div>
                    <div class="modal-footer" style="margin-bottom: 20px">
                        <button type="button" class="btn btn-default" data-dismiss="modal">取 消</button>
                        <button type="button" id="btnConfirm" class="btn btn-primary">确 定</button>
                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>


        <!-- Modal -->

        <div id="EditModal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">门店信息维护</h4>
                    </div>

                    <div class="modal-body col-xs-12" id="EditModelData">
                        <form id="frmSave" method="post" action="@Url.Action("Save")" role="form"> 
                             @Html.Hidden("ID", Model.ID)  
                            @Html.Hidden("REGION_ID", Model.REGION_ID)                          
                            <div class="form-group">
                                <div class="row">
                                    <label for="STORE_NO" class="col-xs-2 control-label"><span style="color: red">*</span>门店编号:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("STORE_NO", Model.STORE_NO, new { @class = "form-control", placeholder = "请输入门店编号" })
                                    </div>

                                    <label for="NAME" class="col-xs-2 control-label"><span style="color: red">*</span>门店名称:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("NAME", Model.NAME, new { @class = "form-control", placeholder = "请输入门店名称" })
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">                                     
                                     <label class="col-xs-2 control-label" for="REGION_ID">所属区域:</label>
                                    <div class="col-xs-4" id="REGION_ID_Str">
                                         @*@Html.ResourceDropDownList("REGION_ID", "REGION", Model.REGION_ID, new { @class = "form-control" }, orgId, false)*@
                                    </div>
                                      <label class="col-xs-2 control-label" for="STATUS"><span style="color: red">*</span>门店类型:</label>
                                    <div class="col-xs-4">
                                    
                                        @Html.ResourceDropDownList("TYPE", "StoreType", Model.TYPE, new { @class = "form-control" })
                                       
                                    </div>
                                </div>

                            </div>
                              <div class="form-group">
                                <div class="row">
                                       <label class="col-xs-2 control-label" for="STORE_TYPE">服务类别:</label>
                                    <div class="col-xs-9">
                                           @Html.Hidden("SERVICE_TYPE")      
                                                          
            @if (ViewBag.servicetypelist != null)
            {
                 @Html.Hidden("count",(( List<SPACRM.Entity.Entities.ORG_DICT_EX>)ViewBag.servicetypelist).Count)
                for (int i = 0; i < ((List<SPACRM.Entity.Entities.ORG_DICT_EX>)ViewBag.servicetypelist).Count; i++)
                {  
                    if(string.IsNullOrEmpty(Model.SERVICE_TYPE))
                    {
                                              
                  <span id="@ViewBag.servicetypelist[i].DICT_CODE"> @ViewBag.servicetypelist[i].DICT_VALUE  </span>           
                 <input   name="@ViewBag.servicetypelist[i].DICT_CODE" type="checkbox" value="@ViewBag.servicetypelist[i].DICT_CODE" />
                
<span> &nbsp; </span>   
            }                              
                }
               
            }
            
            
                                    @*    @Html.ResourceDropDownList("SERVICE_TYPE", "STORE_SERVICETYPE", Model.SERVICE_TYPE, new { @class = "form-control" })*@
                                    
                                    </div>
                                
                                   
                                </div>
                            </div>
                           

                            <div class="form-group">
                                <div class="row">
                                    
                                    <label class="col-xs-2 control-label" for="BRAND">品牌:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("BRAND", Model.BRAND, new { @class = "form-control", placeholder = "请输入品牌" })
                                    </div>
                                   <label class="col-xs-2 control-label" for="MANAGER">管理者:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("MANAGER", Model.MANAGER, new { @class = "form-control", placeholder = "请输入管理者" })
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">                                    
                                      <label class="col-xs-2 control-label" for="TELEPHONE">电话:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("TELEPHONE", Model.TELEPHONE, new { @class = "form-control", placeholder = "请输入电话" })
                                    </div> 
                                    <label class="col-xs-2 control-label" for="PROVINCE">省 份:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("PROVINCE", Model.PROVINCE, new { @class = "form-control", placeholder = "请输入省份市" })
                                    </div>  
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row">  
                                     
                                    <label class="col-xs-2 control-label" for="CITY">城 市:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("CITY", Model.CITY, new { @class = "form-control", placeholder = "请输入城市" })
                                    </div>
                                       <label class="col-xs-2 control-label" for="CITY">服务费:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("SERVICE_FEE_RATE", Model.SERVICE_FEE_RATE, new { @class = "form-control", placeholder = "请输入门店服务费" })
                                    </div>
                                   
                                </div>
                            </div>
                            
                         

                   @*         <div class="form-group">
                                <div class="row">
                                    <label class="col-xs-2 control-label" for="OPEN_DATE_Str"><span style="color: red">*</span>开店日期:</label>
                                    <div class="col-xs-4">
                                        <div class="input-group date" id="OPEN_DATE_picker">
                                            @Html.TextBox("OPEN_DATE_Str", Model.OPEN_DATE_Str, new { @class = "form-control" })
                                            
                                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                        </div>
                                        
                                    </div>
                                    <label class="col-xs-2 control-label" for="CLOSE_DATE_Str">关店日期:</label>
                                    <div class="col-xs-4">
                                        <div class="input-group date" id="CLOSE_DATE_picker">
                                            @Html.TextBox("CLOSE_DATE_Str", Model.CLOSE_DATE_Str, new { @class = "form-control" })
                                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                        </div>
                                        
                                     
                                    </div>
                                </div>
                            </div>*@
                              <div class="form-group">
                                <div class="row">  
                                     
                          <label class="col-xs-2 control-label" for="STATUS">门店状态:</label>
                                    <div class="col-xs-4">
                                        @Html.ResourceDropDownList("STATUS", "OPEN_CLOSE", Model.STATUS, new { @class = "form-control" })
                                    </div>
                                    </div>
                                </div>
                               <div class="form-group">
                                <div class="row">
                                    <label class="col-xs-2 control-label" for="ADDRESS">地址:</label>
                                    <div class="col-xs-10">
                                        @Html.TextBox("ADDRESS", Model.ADDRESS, new { @class = "form-control", placeholder = "请输入地址" })
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div style="clear: both"></div>
                    <div class="modal-footer">
                        <button type="reset" id="btnCancel" class="btn btn-default" data-dismiss="modal">取 消  </button>
                        <button type="button" id="btnSave" class="btn btn-primary">保 存  </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.modal -->
    </div>

</div>
<div style="display: none;">
    <textarea readonly="readonly" class="fullscreen" style="display: none; height: 0px; width: 0px;"></textarea>
</div>
@section jssection{
    <script type="text/javascript">
        var util = {};
        var options = {
            listUrl: "@Url.Action("List")",
            editUrl: "@Url.Action("EditStore")",
            deleteUrl: "@Url.Action("Delete")",
            queryLeftUrl: "@Url.Action("QueryLeft","Company")",
            querySerItemUrl: "@Url.Action("ListStoreType", "Resource")",
        };
    </script>
    @Html.Js("plugins/xjgrid/xjgrid", "plugins/xjdailog/xjdailog", "plugins/validator/validator",
    "plugins/form-datepicker/js/bootstrap-datepicker", "plugins/form-datepicker/js/locales/bootstrap-datepicker.zh-CN",
    "app/company/jquery.tree",
    "app/store/index")
    @Html.Js("plugins/form-select2/select2")
<script type='text/javascript' src='../../assets/plugins/form-daterangepicker/daterangepicker.min.js'></script> 
<script type='text/javascript' src='../../assets/plugins/form-datepicker/js/bootstrap-datepicker.js'></script> 
}