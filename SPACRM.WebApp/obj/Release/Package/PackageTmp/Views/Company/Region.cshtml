@{
    ViewBag.Title = "区域管理";
    var orgId = ViewData["ORG_ID"] == null ? "0" : ViewData["ORG_ID"].ToString(); 
}
@model SPACRM.Entity.Entities.ORG_INFO_EX
@section htmlhead{
     @Html.Css("plugin/validator")
    @Html.Css("plugin/xjgrid", "plugin/xjdailog")
 <link rel='stylesheet' type='text/css' href='../../assets/css/tree.css' />
    <style type="text/css">
        .s_container {
        }

        .h_title {
            padding: 5px 15px;
            border-bottom: solid 1px #e6e5e5;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .searchpanel {
            background-color: #f7f8fa;
            /*border: 1px solid #ccc;*/
            padding: 5px 15px;
            margin-left: 10px;
            border-radius: 4px;
        }

            .searchpanel .form-group, .searchpanel .btnpanel_right {
                display: block;
                overflow: hidden;
                zoom: 1;
                margin-bottom: 0px;
            }

                .searchpanel .form-group label {
                    margin-bottom: 4px;
                }
    </style>
}
<div class="s_container">
    <div id="page-heading">
        <h2><i class="fa fa-cog"></i>&nbsp;区域列表</h2>
    </div>
        <div id="mainbody" class="panel panel-primary col-md-3">
        <div class="panel-heading">
            <h4>组织机构</h4>
        </div>
        <div class="panel-body">
             <div id="ptree"></div>          
        </div>
    </div>

    <div id="mainbody1" class="panel panel-primary col-md-9">
        <div class="panel-heading">
            <h4 id="h4Dict">@Model.PARENT_NAME</h4>
        </div>

        <div class="panel-body" style="min-height: 350px">
            <div class="row">
                <div class="col-md-2 form-group">
                    <button type="button" class="btn default" id="btnAdd"><i class="fa fa-plus"></i>新 增</button>
                </div>
                <div class="text-right col-md-10">
                    <form id="formQuery" role="form" class="form-inline">
                         
                        <div class="form-group">
                            <input type="text" class="form-control" id="REGION_NAME1" name="REGION_NAME1" placeholder="区域名称">&nbsp;&nbsp;&nbsp;
                            <div class="btn-group">
                                <button type="submit" class="btn btn-primary" id="btnQuery"><i class="fa fa-search"></i>查 询</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-md-12">
                    <div class="table-responsive" id="gridlist">
                    </div>
                </div>
            </div>
        </div>

        <div id="confirmModal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">确认！</h4>
                    </div>
                    <div class="modal-body">
                        <p>你确认要删除区域[ <span id="lbuserName"></span>]吗？</p>
                        <input id="hdCurrentId" type="hidden" value="" />
                    </div>
                    <div class="modal-footer" style="margin-bottom: 20px">
                        <button type="button" class="btn btn-default" data-dismiss="modal">取 消</button>
                        <button type="button" id="btnConfirm" class="btn btn-primary">确 定</button>
                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
         
        <div id="EditModal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">区域信息维护</h4>
                    </div>
                    <div class="modal-body col-xs-12" id="EditModelData">
                        <form id="frmSave" method="post" action="@Url.Action("SaveORG_REGION")" role="form">                            
                             @Html.Hidden("ID", Model.ID)
                            @Html.Hidden("PARENT_ID", Model.PARENT_ID)
                            <div class="form-group">
                                <div class="row">
                                    <label for="REGION_NO" class="col-xs-2 control-label"><span style="color: red">*</span>区域编号:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("ORG_NO", Model.ORG_NO, new { @class = "form-control", placeholder = "请输入区域编号" })
                                    </div>
                                    <label for="REGION_NAME" class="col-xs-2 control-label"><span style="color: red">*</span>区域名称:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("ORG_NAME", Model.ORG_NAME, new { @class = "form-control", placeholder = "请输入区域名称" })
                                    </div>
                                </div>
                            </div>
                             <div class="form-group">
                                <div class="row">                                   
                                    <label class="col-xs-2 control-label" for="PARENT_NAME">所属区域:</label>
                                    <div class="col-xs-4" id="PARENT_NAME">
                                        @Model.PARENT_NAME
                                    </div>                                    
                                    <label class="col-xs-2 control-label" for="ORG_LEVEL"><span style="color: red">*</span>等级:</label>
                                    <div class="col-xs-4">
                                        @Html.ResourceDropDownList("ORG_LEVEL", "ORG_LEVEL", Model.ORG_LEVEL, new { @class = "form-control" }, orgId, false)
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">                                   
                                    <label class="col-xs-2 control-label" for="CONTACT">联系人:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("CONTACT", Model.CONTACT, new { @class = "form-control", placeholder = "请输入联系人" })                                       
                                    </div>                                    
                                    <label class="col-xs-2 control-label" for="TELEPHONE">联系方式:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("TELEPHONE", Model.TELEPHONE, new { @class = "form-control", placeholder = "请输入联系方式" })
                                    </div>
                                </div>
                            </div>                           
                            <div class="form-group">
                                <div class="row">                                    
                                    <label class="col-xs-2 control-label" for="FAX">传真号码:</label>
                                    <div class="col-xs-4">
                                        @Html.TextBox("FAX", Model.FAX, new { @class = "form-control", placeholder = "请输入传真号码" })
                                    </div>                                  
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <label class="col-xs-2 control-label" for="ADDRESS">地址:</label>
                                    <div class="col-xs-10">
                                        @Html.TextBox("ADDRESS", Model.ADDRESS, new { @class = "form-control", placeholder = "请输入地址" })
                                    </div>
                                </div>
                            </div>
                             <div class="form-group">
                                <div class="row">
                                    <label class="col-xs-2 control-label" for="REMARK">备注:</label>
                                    <div class="col-xs-10">
                                        @Html.TextArea("REMARK", Model.REMARK, new { @class = "form-control", placeholder = "请输入备注" })
                                    </div>                                     
                                </div>
                            </div>
                        </form>
                    </div>
                    <div style="clear: both"></div>
                    <div class="modal-footer">
                        <button type="reset" id="btnCancel" class="btn btn-default" data-dismiss="modal">取 消  </button>
                        <button type="button" id="btnSave" class="btn btn-primary">保 存  </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.modal -->
    </div>

</div>

@section jssection{
    <script type="text/javascript">
        var util = {};
        var options = {
            listUrl: "@Url.Action("QueryORG_REGIONList")",
            editUrl: "@Url.Action("EditORG_REGION")",
            deleteUrl: "@Url.Action("DeleteORG_REGION")",
            queryLeftUrl: "@Url.Action("QueryLeft")",
        };
    </script>
    @Html.Js("plugins/xjgrid/xjgrid", "plugins/xjdailog/xjdailog", "plugins/validator/validator",
    "plugins/form-datepicker/js/bootstrap-datepicker", "plugins/form-datepicker/js/locales/bootstrap-datepicker.zh-CN",
    "app/company/jquery.tree",
    "app/company/region")
}